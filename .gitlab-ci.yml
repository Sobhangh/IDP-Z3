test:
    image: ubuntu
    script:
        - apt update
        - apt -y install python3 python3-pip git
        - python3 get-poetry.py
        - source $HOME/.poetry/env
        - poetry install
        - poetry run coverage run test.py generate pipeline api
        - poetry run coverage report

pages:
  image: ubuntu
  stage: deploy
  script:
    - apt update
    - apt -y install python3 python3-pip git
    - python3 get-poetry.py
    - source $HOME/.poetry/env
    - poetry install
    - poetry run sphinx-build homepage public
  artifacts:
    paths:
    - public
  only:
  - main
